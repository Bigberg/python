####Day5作业
#### 江飞
####[博客地址,点击URL](http://www.cnblogs.com/bigberg/p/6740209.html)
####一.作业需求

    额度 15000或自定义
    实现购物商城，买东西加入 购物车，调用信用卡接口结账
    可以提现，手续费5%
    支持多账户登录
    支持账户间转账
    记录每月日常消费流水
    提供还款接口
    ATM记录操作日志
    提供管理接口，包括添加账户、用户额度，冻结账户等。。
    用户认证用装饰器
####二.需求分析
    1.ATM前后台分离
    2.账号信息和消费记录等存储在db中
    3.一个登入认证的模块，包含一个认证装饰器
    4.一个日志模块
    5.一个消费记录模块
    6.将数据库信息和利率记录在setting文件中
    7.一个模块处理db中的账号信息
    8.需要一个模块来上传操作记录到具体文件中
####三.使用说明
    1.ATM前后台在ATM/bin下,atm.py为前端入口,manage.py为管理端入口
    2.管理页面添加账号请参考ATM/db/account_smaple.py 中的形式
    3.管理页面和atm前端操作都会打印提示,请根据提示进行
    4.ATM账号也一串数字,也作为ATM登入用户名
    5.购物商城的接口程序在 MALL/bin 下,请运行 shopping.py
    6.购物商城的用户名和密码存在MALL/mall_db/account中,这个是商城登入需要使用
    7.购物后付款，需要输入卡号和密码，这里是ATM中的账号和密码
    8.在同一次购物付款完成后,并没有退出程序,继续购买商品,此时将不需要再次输入卡号和密码
    9.在购物商城中的消费记录，也会同时记录到ATM中，所有查询ATM记录是也会存在商城购物记录
  
####四.程序测试
#####4.1 测试样例
    银行卡账号：ATM/db/account中，密码：123456
    商城登入账号： bigberg:123456   smallberg:123abc

#####4.2 测试内容
    后台管理 manage.py

    --- Welcome to Manage Page ---
     1. 添加账户
     2. 提升额度
     3. 修改状态
     4. 查看账户
     5. 退出
     
4.2.1 添加账户
     
    输入编号选择您所需的功能:1
    like 62021234:62025555
    password:123456
    credit:15000
    balance:15000
    enroll_date:2017-06-12
    expire_date:2022-06-11
    pay_day:22
    status:0

4.2.2 提升额度

    输入编号选择您所需的功能:2
    请输入您想要更改的卡号:62025555
    目前的额度为: 15000
    请输入新的额度:20000
    额度提升完成
    
4.2.3 修改状态

    请输入您想要更改状态的卡号:62025555
        0 : 正常,
        1 : 锁定,
        2 : 过期
    目前该卡号的状态为： 0
    请输入您想要更改的状态的编号: 2
    该卡的状态修改完成!

4.2.4 查看账户

    输入编号选择您所需的功能:4
    请输入您想要查询的卡号:62025555
    ----------- 62025555 info ------------
            card_number: 62025555,
            credit: 20000,
            balance: 15000,
            enroll_date: 2017-06-12,
            expire_date: 2022-06-11,
            pay_day: 22,
            status: 2
    --------------------------------------


ATM前台测试
    
    --- Welcome to Bank ---
         1. 账号信息
         2. 还款
         3. 取款
         4. 转账
         5. 账单
         6. 退出
    -----------------------

 
4.2.5 前台登入
    
    请输入您的卡号:62024444
    请输入您的密码:123456
    ##密码尝试次数为3次
   
4.2.6 账号信息

    输入编号选择您所需的功能:1
    ------- 您的账号62024444目前的信息 --------
              card_number: 62024444,
              credit: 16000,
              balance: 15000,
              enroll_date: 2017-06-01,
              expire_date: 2022-05-31,
              pay_day: 22,
              status: 0
    --------------------------------------------
        
4.2.7 还款
    
    输入编号选择您所需的功能:2
    本期应还款金额是: 1000.0
    请输入还款金额: 1000
    本次交易完成,您的可用余额是16000.0
   
4.2.8 取款

    输入编号选择您所需的功能:3
    ---- BALANCE INFO ----
        Credit:   16000
        Balance:  16000.0
    
    请输入您想提取的金额: 2000
    本次交易完成,您的可用余额是13900.0
    # 取款有利息
   
4.2.9 转账

    输入编号选择您所需的功能:4
    请输入您想转账的卡号: 62022222
    请输入转账金额: 3000
    本次交易完成,您的可用余额是10750.0

4.2.10 账单查询

    输入编号选择您所需的功能:5
    您今年所能查询的月份是: 
    6
    选择查询的月份: 6
    2017-06-12 15:00:59    repay    1000.0
    2017-06-12 15:01:55    withdraw    2000.0
    2017-06-12 15:05:28    transfer    3000.0

购物商城
        Welcome!bigberg
    --- Welcome to Mall ---
             1. 购物
             2. 付款
             3. 购买记录
             4. 退出
    -----------------------

4.2.11 登入

    请输入用户名:bigberg
    请输入密码:123456

4.2.12 购物

    输入编号选择您所需的功能:1
    1 iPhone 6300
    2 Mac Pro 12000
    3 Python 81
    4 Bike 800
    5 shirt 300
    输入商品编号,选择购买商品:3
    iPhone Python
    6381
    --- Welcome to Bank ---
             1. 购物
             2. 付款
             3. 购买记录
             4. 退出
    -----------------------
   
    # 此处购买多个物品，需要循环选择功能1

4.2.13 付款

    输入编号选择您所需的功能:2
    请输入您的卡号:62024444
    请输入您的密码:123456
    您卡中的余额是10750.0
    正在付款...
    ...
    ...
    交易完成！
    
4.2.14 购买记录

    您今年所能查询的月份是: 
    5
    6
    选择查询的月份: 6
    2017-06-02 19:04:21    buy    Python,Bike   881
    2017-06-12 15:14:01    buy    iPhone,Python   6381